# 线程安全的对象生命周期管理

## 当析构函数遇到多线程

### 竞态条件（race condition）

- 析构对象时，别的线程执行成员函数
- 执行成员函数，另一个线程正在析构
- 调用成员函数是，从何得知这个对象活着？

### 线程安全

- 多个线程同时访问时，表现出正确的行为
- 无论操作系统如何调度线程，无论这些线程的执行顺序如何交织
- 调用端代码无须额外的同步或其他协调动作

## 对象的创建很简单

### 不要再构造函数中注册任何回调

### 不要再构造函数中把this传给跨线程的对象

### 即使在构造函数的最后一行也不行

*XMind - Trial Version*